<!--
    Generated template for the EventOwnerHomePage page.

    See http://ionicframework.com/docs/components/#navigation for more info on
    Ionic pages and navigation.
  -->
<ion-header>

  <ion-navbar>
    <ion-title>EventOwnerHomePage</ion-title>
    <ion-buttons end >
      <button icon-only ion-button [navPush]="'EventSelectPage'">Switch Events</button>    
    </ion-buttons>
  </ion-navbar>

</ion-header>


<ion-content padding>
  <h1><b>Event Creation</b></h1>
  <ion-list>
    <ion-item no-lines [navPush]="'CreateEventPage'" [navParams]="buildNavParams({actionType:'create','wizardMode':true})">
      <ion-icon item-start name="ios-add-circle-outline"></ion-icon> Create Event 

      <!--<button item-start ion-button [navPush]="'CreateEventPage'" [navParams]="buildNavParams({actionType:'create','wizardMode':true})" >Create Event</button>-->
    </ion-item>
  </ion-list>

  <!--  <button ion-button [navPush]="'CreateTournamentPage'" [navParams]="{entityType:'tournament',actionType:'create',targetEventId:1,eventName:'poop'}" >Create Tournament</button> -->
  <h1><b>Your Events</b></h1>
  <ion-list>
    <ng-container *ngFor="let event of eventsAndTournaments">
      <ion-item-divider (click)="expand(event)">
        <h1>{{event.name}}</h1><ion-icon item-end [name]="event.expanded==false?'ios-arrow-dropdown':'ios-arrow-dropup'"></ion-icon>
      </ion-item-divider>
      <!--    <ion-item>
              <ion-icon item-start></ion-icon>
              <button item-end ion-button [navPush]="'EventOwnerCreateTournamentPage'" [navParams]="{entityType:'tournament',actionType:'create'}" >Create Tournament</button>
              <b>Tournaments</b>
      </ion-item>-->
      <ion-item no-lines *ngIf="event.expanded" [navPush]="'EventOwnerCreateTournamentPage'" [navParams]="{entityType:'tournament',actionType:'create'}">
        <ion-icon item-start name="ios-add-circle-outline"></ion-icon> Create Tournament 

<!--        <button item-start ion-button [navPush]="'EventOwnerCreateTournamentPage'" [navParams]="{entityType:'tournament',actionType:'create'}" >Create Tournament</button>-->
      </ion-item>
      
      <ng-container *ngFor="let tournament of event.tournaments">
        <ion-item (click)="expand(tournament)" *ngIf="event.expanded">      
          {{tournament.tournament_name}}<ion-icon item-end [name]="tournament.expanded==false?'ios-arrow-dropdown':'ios-arrow-dropup'"></ion-icon>
        </ion-item>
        <ng-container *ngIf="tournament.expanded!=true?false:true">
          <ion-item>
            <button ion-button [navPush]="'EventOwnerTournamentMachinesPage'" [navParams]="buildNavParams({tournamentId:tournament.tournament_id, eventId:event.event_id})">Add Machines To Tournament</button>
            <br>
            <button ion-button >Edit Tournament</button>
            <br>
            <button ion-button ><ion-icon item-start [name]="tournament.active?'play':'pause'"></ion-icon>Toggle Tournament</button>
          </ion-item>
        </ng-container>
      </ng-container>
    </ng-container>
  </ion-list>
</ion-content>
