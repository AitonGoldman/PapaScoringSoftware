<!--
  Generated template for the ResultsFinalsMatchPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar color='pss-header'>
    <ion-title>{{finalName}} Finals Results</ion-title>

    <!-- <ion-buttons end showWhen='mobile'> -->
    <!--   <button tappable no-margin (click)="gotoParentTab()" icon-only ion-button> <ion-icon name="clipboard"></ion-icon></button><br> -->
    <!--   <p no-margin style='font-size:8px;line-height:8px' text-center>Results<br>Home</p> -->
    <!-- </ion-buttons> -->
  </ion-navbar>
</ion-header>
<ion-content>
  <div text-center margin-top margin-bottom>
    <ion-chip tappable (click)="reloadResults()">
      <ion-label>Refresh</ion-label>
      <ion-icon name="refresh" color="dark" item-end></ion-icon>      
    </ion-chip>
  </div>

  <div [style.width]='contentWidth' class='desktopSlim'>

  <div *ngIf='match!=null' no-padding margin>
    <ion-grid style='border-width:1px;border-style:solid'>
      <ion-row>
        <ion-col hideWhen='mobile'>
        </ion-col>
        <ion-col col-2 text-center>
          Rank
        </ion-col>
        <ion-col hideWhen='mobile' col-6 text-center>
          Name
        </ion-col>
        <ion-col col-8 showWhen='mobile' text-center>
          Name
        </ion-col>
        
        <ion-col col-2 text-center text-nowrap>
          Points
        </ion-col>
        <ion-col hideWhen='mobile'>
        </ion-col>
        
      </ion-row>
      <ion-row *ngFor="let player of ['one','two','three','four']" >
        <ion-col hideWhen='mobile'></ion-col>
        <ion-col col-2 text-center>{{match['player_'+player+'_rank']}}</ion-col>
        <ion-col col-6 hideWhen='mobile' text-center>{{match['player_'+player+'_name']}}</ion-col>
        <ion-col col-8 showWhen='mobile' text-center>{{match['player_'+player+'_name']}}</ion-col>                
        <ion-col text-center col-2>{{match['player_'+player+'_points_1']+match['player_'+player+'_points_2']+match['player_'+player+'_points_3']+match['player_'+player+'_points_4']}}</ion-col>
        <ion-col hideWhen='mobile'></ion-col>
      </ion-row>
    </ion-grid>
  </div>
  <div text-center>
    <button ion-button default tappable [navPush]="'ResultsFinalsRoundsPage'" [navParams]="buildNavParams({finalId:finalId,round:round})" >Back to Matches</button>
  </div>
  <ng-container *ngFor="let machineNum of [1,2,3,4]">
    <div margin-top margin-bottom text-center>      
      &nbsp;    
    </div>

  <div *ngIf="match!=null && (machineNum==1 || (machineNum==2 && match.one_completed==true) || (machineNum==3 && match.two_completed==true)|| (machineNum==4 && match.three_completed==true))" magin-top margin-bottom>
    <ion-item><h1>Game {{machineNum}}</h1>  </ion-item>

  <!--<button ion-button (click)="generateListForOrderPicking(machineNum)">Reset Player Order</button>-->  

  <div *ngIf="gameDisplay && gameDisplay[machineNum]==true" >
   <ion-item>
     {{match['machine_'+machineNum]}}
   </ion-item>
   <ion-grid  padding-left>
     <ion-row>
       <ion-col col-6 text-left>
         Name
       </ion-col>
       <ion-col col-4 text-center>
         Score
       </ion-col>
       <ion-col col-2 text-center text-nowrap padding-left>
         Points
       </ion-col>
     </ion-row>
   </ion-grid>   

   <ion-grid  padding-left *ngFor="let player of scoreOrderLists[machineNum];index as i">
     <ion-row>
       <ion-col col-6 text-left>
         {{player.name}}
       </ion-col>
       <ion-col col-5 text-center>
         {{match[player.player+'_score_'+machineNum]}}
       </ion-col>
       <ion-col col-1 text-right>         
         {{match[player.player+'_points_'+machineNum]}}
       </ion-col>
     </ion-row>
   </ion-grid>   
  </div>

  <!--<form #myForm="ngForm" *ngIf='final!=null'>
    <ion-item *ngFor="let player of ['one','two','three']">
      <ion-label stacked>Username</ion-label>
      <ion-input  type="text" required
                 [(ngModel)]="final['player_'+player+'_score_'+player]" name="test"></ion-input>
    </ion-item>    
  </form>-->
  </div>
  </ng-container>

  <div *ngIf='match != null && match.tiebreaker_id!=null' style='border-width:1px;border-style:solid' padding margin>
    <b>Tiebreaker</b><span margin-left *ngIf="match.tiebreaker != null && match.tiebreaker.completed==true">(completed)</span>
    <form #myTiebreakerForm="ngForm">
      <ion-item *ngFor="let player of match.tiebreaker.players">
        {{player.player_name}} : {{player.score}}
      </ion-item>
    </form>    
  </div>
  </div>
</ion-content>
