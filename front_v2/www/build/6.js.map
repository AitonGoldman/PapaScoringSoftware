{"version":3,"sources":["../../src/pages/tournament-machines/tournament-machines.module.ts","../../src/components/pss-page/pss-page.ts","../../src/pages/tournament-machines/tournament-machines.ts"],"names":[],"mappings":"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","file":"6.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TournamentMachinesPage } from './tournament-machines';\nimport { AutoCompleteModule } from 'ionic2-auto-complete';\n\n@NgModule({\n  declarations: [\n    TournamentMachinesPage,\n  ],\n  imports: [\n      IonicPageModule.forChild(TournamentMachinesPage),\n      AutoCompleteModule\n  ],\n})\nexport class TournamentMachinesPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tournament-machines/tournament-machines.module.ts","import { Component } from '@angular/core';\nimport { Platform, App, NavParams, NavController } from 'ionic-angular';\nimport { EventAuthProvider } from '../../providers/event-auth/event-auth';\nimport { PssApiProvider } from '../../providers/pss-api/pss-api';\n\n/**\n * Generated class for the TopNavComponent component.\n *\n * See https://angular.io/api/core/Component for more info on Angular\n * Components.\n */\n@Component({\n    selector: 'pss-page',\n    templateUrl: 'pss-page.html'\n})\nexport class PssPageComponent {\n    eventId:number = null;\n    eventName:string = null;\n    tournamentId:number = null;\n    hideBackButton:boolean = false;\n    constructor(public eventAuth: EventAuthProvider,\n                public navParams: NavParams,\n                public navCtrl: NavController,\n                public appCtrl: App,\n                public pssApi: PssApiProvider,\n                public platform: Platform) {\n        this.eventId = navParams.get('eventId');\n        this.eventName = navParams.get('eventName');\n        console.log('Hello PssPageComponent Component');\n    }\n    buildNavParams(params){\n        params['eventId'] = this.eventId;\n        params['eventName'] = this.eventName;\n        return params;\n    }\n    getHomePageString(){        \n        let role = this.eventAuth.getRoleName(this.eventId);\n        if(role==\"tournamentdirector\"){\n                return 'TournamentDirectorHomePage'            \n        }\n        //if(role==\"eventowner\"){\n        //        return 'EventOwnerHomePage'            \n        //}        \n        if (role == null){\n            return 'HomePage';\n        }\n        \n    }\n    pushRootPage(page,params={}) {\n        this.appCtrl.getRootNav().push(page, params);\n    }\n    \n    pushPageWithNoBackButton(pageName,navParams,tabIndex?):void{\n        console.log('in push page with no back button...');\n        if(tabIndex!=null){            \n            console.log(tabIndex);\n            console.log('in push page with no back button...2');\n            this.navCtrl.parent.getByIndex(tabIndex).setRoot(pageName,navParams,{animate:false});\n            console.log('in push page with no back button...3');\n            this.navCtrl.parent.select(tabIndex);\n            console.log('in push page with no back button...4');\n            return;\n        }\n        console.log('page name is ...'+pageName);\n        this.navCtrl.getActive().willLeave.subscribe(\n            ()=>{\n                this.navCtrl.last().showBackButton(false);\n            }\n        )        \n        this.navCtrl.push(pageName,this.buildNavParams(navParams));\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/pss-page/pss-page.ts","import { ViewChild, Component } from '@angular/core';\nimport { IonicPage } from 'ionic-angular';\nimport { PssPageComponent } from '../../components/pss-page/pss-page'\nimport { AutoCompleteProvider } from '../../providers/auto-complete/auto-complete';\nimport { List, Platform, App, NavParams, NavController } from 'ionic-angular';\nimport { EventAuthProvider } from '../../providers/event-auth/event-auth';\nimport { PssApiProvider } from '../../providers/pss-api/pss-api';\nimport { ToastController } from 'ionic-angular';\nimport { ActionSheetController } from 'ionic-angular'\n\n/**\n * Generated class for the TournamentMachinesPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage({\n    segment:'TournamentMachines/:eventId/:tournamentId'\n})\n@Component({\n  selector: 'page-tournament-machines',\n  templateUrl: 'tournament-machines.html',\n})\nexport class TournamentMachinesPage extends PssPageComponent {\n    machines:any;    \n    selectedMachine:any;\n    sliding:boolean = true;\n    selectedMachines:any = [];\n    @ViewChild('searchbar')  searchbar: AutoCompleteProvider;\n    @ViewChild(List)  list: List;\n    \n    constructor(public autoCompleteProvider:AutoCompleteProvider,\n                public eventAuth: EventAuthProvider,\n                public navParams: NavParams,\n                public navCtrl: NavController,\n                public appCtrl: App,\n                public pssApi: PssApiProvider,\n                public platform: Platform,\n                private toastCtrl: ToastController,\n                public actionSheetCtrl: ActionSheetController){\n        super(eventAuth,navParams,\n              navCtrl,appCtrl,\n              pssApi,platform)\n    }\n    generateGetAllMachinesProcessor(){\n        return (result) => {            \n            if(result == null){\n                return;\n            }\n            this.autoCompleteProvider.setMachines(result.data.machines_list);\n            this.selectedMachines=result.data.tournament_machines_list;\n        };\n    }\n    generateAddEditTournamentMachineProcessor(message_string,action){\n        return (result) => {            \n            if(result == null){\n                return;\n            }\n                            let toast = this.toastCtrl.create({\n                                message: message_string,\n                                duration: 99000,\n                                position: 'top',\n                                showCloseButton: true                    \n                });\n            toast.present();\n            console.log(this.list)            \n            if(action==\"add\"){\n                this.selectedMachine=result.data;\n                this.selectedMachines.push(this.selectedMachine);\n            }\n        };\n        \n    }\n    onRemove(machine){\n        let actionSheet = this.actionSheetCtrl.create({\n            title: 'Are you SURE you want to remove '+machine.tournament_machine_name+'?',\n            buttons: [\n                {\n                text: 'Remove',\n                role: 'destructive',\n                handler: () => {\n                    this.onRemoveConfirmed(machine);\n                    console.log('Destructive clicked');\n                }\n            },\n                {\n                text: 'Cancel',\n                role: 'cancel',\n                handler: () => {\n                    console.log('Cancel clicked');\n                }\n            }\n            ]\n        });\n        actionSheet.present();        \n    }\n    \n    onRemoveConfirmed(machine){\n        machine.removed=true;        \n        this.pssApi.editTournamentMachine(machine,this.eventId)\n            .subscribe(this.generateAddEditTournamentMachineProcessor(machine.tournament_machine_name+\" has been removed!\",\"edit\"))            \n\n    }\n        \n    onDisable(machine){\n        machine.active=machine.active==false;\n        let stringDescription = machine.active==true ? \"enabled\" : \"disabled\"\n        this.pssApi.editTournamentMachine(machine,this.eventId)\n            .subscribe(this.generateAddEditTournamentMachineProcessor(machine.tournament_machine_name+\" has been \"+stringDescription,\"edit\"))            \n    }\n    onSelect(){        \n        console.log(this.selectedMachine);\n        this.selectedMachine.tournament_id=this.tournamentId;\n        this.selectedMachine.tournament_machine_name=this.selectedMachine.machine_name;        \n        this.pssApi.addTournamentMachine(this.selectedMachine,this.eventId)\n            .subscribe(this.generateAddEditTournamentMachineProcessor(this.selectedMachine.tournament_machine_name+\" has been added\",\"add\"))            \n\n    }\n    onFocus(){\n        this.selectedMachine=null;\n    }\n    ionViewWillLoad() {\n        //this.targetEventId=this.navParams.get('eventId');\n        this.tournamentId=this.navParams.get('tournamentId');\n        this.pssApi.getAllMachines(this.eventId,this.tournamentId)\n            .subscribe(this.generateGetAllMachinesProcessor())    \n        \n        console.log('ionViewDidLoad TournamentMachinesPage');\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tournament-machines/tournament-machines.ts"],"sourceRoot":""}