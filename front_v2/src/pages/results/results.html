<!--
  Generated template for the ResultsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar color='pss-header'>
    <custom-headers [homePageDisplayName]="getHomePageDisplayString()" [title]="eventName" [eventId]="eventId" [eventName]="eventName" [homePage]="getHomePageString()"></custom-headers>
  </ion-navbar>  
</ion-header>

<ion-content padding class="card-background-page">
  <ion-list showWhen="core,tablet" [style.width]="contentWidth" style='margin-left:auto;margin-right:auto'>
    <ion-item detail-none [navPush]='"PlayerInfoPage"' [navParams]="buildNavParams({})">
      Player Results
      <ion-icon item-end name="ios-arrow-forward"></ion-icon>
    </ion-item>
    <ion-item no-lines>
    </ion-item>
    <ng-container *ngFor="let tournament of tournaments">
      <ng-container *ngIf="tournament.finals_ids!=null && tournament.finals_ids.length!=0">
        <!--<ion-item detail-none *ngFor="let final of tournament.finals_ids" tappable (click)="pushRootPage(platform.is('mobile')?'ResultsFinalsPage':'ResultsFinalsRoundsPage',buildNavParams({finalId:final.final_id,round:1}))">
          {{final.final_name}} Finals Results
            <ion-icon item-end name="ios-arrow-forward"></ion-icon>

        </ion-item>-->        
        <ion-item detail-none *ngFor="let final of tournament.finals_ids" tappable [navPush]='"ResultsFinalsRoundsPage"' [navParams]="buildNavParams({finalId:final.final_id,round:1,totalRounds:final.number_of_rounds})">
          {{final.final_name}} Finals Results
            <ion-icon item-end name="ios-arrow-forward"></ion-icon>

        </ion-item>
        
      </ng-container>
      <ion-item *ngIf="tournament.finals_only==false" detail-none [navPush]='"ResultsTournamentPage"' [navParams]="buildNavParams({tournamentId:tournament.tournament_id,tournamentName:tournament.tournament_name})">
        {{tournament.tournament_name}} Tournament Results
        <ion-icon item-end name="ios-arrow-forward"></ion-icon>
      </ion-item>
    </ng-container>
    <ion-item no-lines>
    </ion-item>
    <ng-container *ngFor="let tournament of tournaments">
      <ng-container *ngIf="tournament.finals_only==false">
        <ion-item id="tournament_machines_{{tournament.tournament_id}}" (click)="expandMachines(tournament,'tournament_machines_'+tournament.tournament_id)">
          {{tournament.tournament_name}} Machines Results
          <ion-icon item-end name="{{tournament.expand_machines!=true?'ios-arrow-dropdown':'ios-arrow-dropup'}}"></ion-icon>

        </ion-item>
        <ion-list *ngIf='tournament != null && tournament.expand_machines==true'>
          <ion-item margin-left  *ngFor="let machine of tournament.tournament_machines" [navPush]="'ResultsMachinePage'" [navParams]="buildNavParams({tournamentId:tournament.tournament_id,tournamentName:tournament.tournament_name,tournamentMachineId:machine.tournament_machine_id,tournamentMachineName:machine.tournament_machine_name})">
            {{machine.tournament_machine_name}}
            <ion-icon margin-right padding-right item-end name="ios-arrow-forward"></ion-icon>
          </ion-item>
        </ion-list>
      </ng-container>
    </ng-container>
  </ion-list>
  

  <ion-grid hideWhen="core,tablet">
  <ion-row>
    <ion-col tappable col-12 [navPush]='"PlayerInfoPage"' [navParams]="buildNavParams({})">
      <ion-card >
        <!--<img [style.height]='"90px"' [style.width]='"100%"' [src]="imgBaseUrl+'/assets/imgs/players.jpg'"/>-->
        <img-loader [style.height]='"90px"' [style.width]='"100%"' [src]="imgBaseUrl+'/assets/imgs/players.jpg'" useImg ></img-loader>

      <div class="card-title">Player Results</div>
      </ion-card>      
    </ion-col>

    <ng-container *ngFor="let tournament of tournaments">
      <ion-col col-12>
        <ng-container *ngIf="tournament.finals_ids!=null && tournament.finals_ids.length!=0">
          <ion-card  *ngFor="let final of tournament.finals_ids" tappable [navPush]='"ResultsFinalsRoundsPage"' [navParams]="buildNavParams({finalId:final.final_id,round:1,totalRounds:final.number_of_rounds})">
            <!--<img [style.height]='"90px"' [style.width]='"100%"' [src]="tournament.img_url!=null?imgBaseUrl+tournament.img_url:imgBaseUrl+'/assets/imgs/finals.jpg'"/>-->
            <img-loader [style.height]='"90px"' [style.width]='"100%"' [src]="tournament.img_url!=null?imgBaseUrl+tournament.img_url:imgBaseUrl+'/assets/imgs/finals.jpg'" useImg ></img-loader>
            
            <div class="card-title">{{final.final_name}} Finals Results</div>
          </ion-card>
        </ng-container>    
    </ion-col>
    <ion-col tappable col-12 [navPush]='"ResultsTournamentPage"' [navParams]="buildNavParams({tournamentId:tournament.tournament_id,tournamentName:tournament.tournament_name})">
      <ion-card >
        <!--<img [style.height]='"90px"' [style.width]='"100%"' [src]="tournament.img_url!=null?imgBaseUrl+tournament.img_url:imgBaseUrl+'/assets/imgs/dummy_tournament_small.jpeg'"/>-->
        <img-loader [style.height]='"90px"' [style.width]='"100%"' [src]="tournament.img_url!=null?imgBaseUrl+tournament.img_url:imgBaseUrl+'/assets/imgs/dummy_tournament_small.jpeg'" useImg ></img-loader>

        
        
        <div class="card-title">{{tournament.tournament_name}} Tournament Results</div>
      </ion-card>      
    </ion-col>
    <ion-col col-12 id="tournament_machines_mobile_{{tournament.tournament_id}}">
      <ion-card tappable (click)="expandMachines(tournament,'tournament_machines_mobile_'+tournament.tournament_id)">
        <!--<img [style.height]='"90px"' [style.width]='"100%"' [src]="imgBaseUrl+'/assets/imgs/dummy_machines_small.jpg'" />-->
        <img-loader [style.height]='"90px"' [style.width]='"100%"' [src]="imgBaseUrl+'/assets/imgs/dummy_machines_small.jpg'" useImg ></img-loader>
        
      <div class="card-title">{{tournament.tournament_name}} Machines</div>
      </ion-card>
      <ion-list showWhen='mobile' *ngIf='tournament != null && tournament.expand_machines==true' no-lines>
        <ion-item tappable *ngFor="let machine of tournament.tournament_machines" detail-push [navPush]="'ResultsMachinePage'" [navParams]="buildNavParams({tournamentId:tournament.tournament_id,tournamentName:tournament.tournament_name,tournamentMachineId:machine.tournament_machine_id,tournamentMachineName:machine.tournament_machine_name})">
          {{machine.tournament_machine_name}}
        </ion-item>
      </ion-list>
    </ion-col>    
    </ng-container>
  </ion-row>
</ion-grid>
</ion-content>
